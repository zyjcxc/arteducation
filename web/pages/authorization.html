<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <title>全国特长生认证委员会</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="全国特长生认证委员会，证书展示">
    <meta name="keywords" content="全国特长生认证委员会，证书展示">
    <script type="text/javascript" src="../utils/jquery-3.3.1.min.js"></script>
    <link rel="stylesheet" href="../css/style.css">


</head>

<body>
<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel"></h4>
            </div>
            <div class="modal-body">
                <img style="margin:0 auto;display: block" id="modalImg" src="" alt="" />
            </div>
            <div class="modal-footer">
                <button onclick="toLink()" class="btn btn-sm" style="background: #840e35;color:#fff;">查看详情</button>
            </div>
        </div>
    </div>
</div>

<div class="page-list">

    <!------------ 注释：顶部 start ----------->
    <div id="header-page"></div>
    <!------------ 注释：顶部 end ----------->
    <!------------ 注释：面包屑 start ----------->
    <div id="breadcrumb-page"></div>
    <!------------ 注释：面包屑 end ----------->
    <div class="contain credentials">

        <!------------ 注释：插入 menu start ----------->
        <div id="menu_list"></div>
        <!------------ 注释：插入 menu end ----------->

        <div class="content">
            <h2 class="visible-md-block visible-lg-block visible-sm-block">授权书</h2>
            <ul class="item-list">
                <div style="text-align: center;line-height: 35px">暂无数据</div>
            </ul>
            <div id="pagination" class="page fl">
                <div class="ui-pagination-container"></div>
            </div>
        </div>

    </div>





    <!------------ 注释：底部 start ----------->
    <div id="footer-page"></div>
    <!------------ 注释：底部 start ----------->

</div>

<!--ajax封装-->
<script type="text/javascript" src="../js/extend.js"></script>
<!--通用：包括config，公共头底页面，面包屑及目录-->
<script type="text/javascript" src="../js/common.js"></script>
<script type="text/javascript">
    var page_num = 1;
    var page_size = 10;
    function getList(num) {
        $.EXTEND.GET('artAuthbook',{offset:( num - 1 )*page_size})
            .then(function (res) {
                if(res && res.data && res.data.length>0){
                    var str1 = '';
                    $.each(res.data, function(i, item) {
                        str1 +=
                            '<li data-toggle="modal" class="myModal" data-title="'+ item.title +'" data-id="'+ item.id +'" data-img="'+ item.picurl +'">' +
                            '<img src="'+ item.picurl +'" alt="" />' +
                            '<p>'+ item.title +'</p>' +
                            '</li>';
                    });
                    $(".item-list").html(str1);
                    page(Math.ceil(res.recordsTotal / page_size));
                }

            });
    }
    function page(total) {
        $("#pagination").pagination({
            currentPage: page_num,
            totalPage: total,
            isShow: true,
            homePageText: "首页",
            endPageText: "尾页",
            prevPageText: "上一页",
            nextPageText: "下一页",
            callback: function(current) {
                $("#current3").text(current);
                page_num = current;
                getList(current)
            }
        });
    }
    $(".item-list").on('click', ".myModal",function(){
        var that = this;
        link = './detail/detail.html?path=artAuthbook&id=' + $(that).data('id');
        $('.modal-title').html($(that).data('title'));
        $('#modalImg').attr('src',$(that).data('img'));
        $('#myModal').modal({
            show:true
        })
    });
    /*跳转*/
    var link = null;
    function toLink(url) {
        if(link) window.open(link)
    }

    function init() {
        getList(page_num);
    }
    init()

</script>

</body>

</html>